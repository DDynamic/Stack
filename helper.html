<html>
	<head>
		<title>Command Helper</title>
        <meta name="viewport" content="initial-scale=1">
		<meta charset="utf-8">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
		<link rel="stylesheet" href="https://bootswatch.com/4/litera/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.0/codemirror.min.css">
		<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
		<script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.0/codemirror.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.0/mode/javascript/javascript.min.js"></script>
	</head>
	<body>
		<div class="container my-4">
			<h3 class="display-3">Command Helper</h3>
			<p class="card-text">
				Welcome to the command helper. To begin, start writing a command in Javascript or paste in an array formatted command and hit write.
			</p>
			<div class="card">
				<div class="card-body">
					<textarea id="code"></textarea>
				</div>
				<div class="card-footer">
					<div class="btn-group btn-group-lg d-flex justify-content-center">
						<button class="btn btn-secondary" id="read">Read</button>
						<button class="btn btn-primary" id="write">Write</button>
					</div>
					<br>
					<p class="card-text">
						This is the function that will be executed when your command is run.
						You can do just about anything here, including sending a direct message,
						updating a value in a database, etc.
						This file is written in Node.js. You have access to the following variables
						and the discord.js library. You can find the discord.js documentation <a href="https://discord.js.org/#/docs/main/stable/general/welcome"> here</a>.<br><br>
						<b>Not sure where to start?</b> Check out <a href="https://github.com/DDynamic/Stack#examples">these examples</a>.
						<br><br><code>client</code> - The main discord.js object.
						<br><code>msg</code> - The message object.
						<br><code>args</code> - An array of command arguments.
					</p>
				</div>
			</div>
			<script>
				var editor = CodeMirror.fromTextArea(document.getElementById('code'), {
					lineNumbers: true,
					height: 100,
					mode: 'javascript'
				});
				
				editor.setOption("extraKeys", {
					Tab: function(cm) {
						var spaces = Array(cm.getOption("indentUnit") + 3).join(" ");
						cm.replaceSelection(spaces);
					}
				});
								
				$('#read').click(function() {
					var text = editor.getValue();
					text = text.replace(/",/g, '');
					text = text.replace(/"/g, '');
;					text = text.replace(/\\n/g, '');
					text = text.replace(/\\t/g, '    ');
					
					editor.setValue(text);
				});
				
				$('#write').click(function() {
					var split = editor.getValue().split('\n');
					var text = '';
					
					split.forEach(function (item, key, split) {
						if (Object.is(split.length -1, key)) {
							text += '"' + item.replace(/	/g, '\\t').trim() + '\\n"<br>';
						} else {
							text += '"' + item.replace(/	/g, '\\t').trim() + '\\n",<br>';
						}
					});
					
					$('#text').html(text);
					$('#output').modal();
				});
			</script>
		</div>
	</body>
	<div class="modal" tabindex="-1" role="dialog" id="output">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Output<br><br>The output below goes in the "code" index array. See examples for details.</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p id="text"></p>
				</div>
			</div>
		</div>
	</div>
</html>